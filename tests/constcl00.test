
package require tcltest
namespace import -force tcltest::*
source ../constcl.tcl


test initial-1.0 {try reg} -setup {
  set dr $::constcl::defreg
} -body {
  reg foo
  reg special bar
  reg macro baz
  puts [lrange $::constcl::defreg end-5 end]
} -cleanup {
  set ::constcl::defreg $dr
} -output "197 {foo {VARIABLE ::constcl::foo}} 198 {bar {SPECIAL ::constcl::special-bar}} 199 {baz {SYNTAX ::constcl::expand-baz}}\n"

test initial-1.1 {try regvar} -setup {
  set dr $::constcl::defreg
} -body {
  regvar foo bar
  puts [lrange $::constcl::defreg end-1 end]
} -cleanup {
  set ::constcl::defreg $dr
} -output "197 {foo {VARIABLE bar}}\n"

cleanupTests
return
