
package require tcltest
namespace import -force tcltest::*
source constcl.tcl

test cons-2.0 {calculate factorial} -body {
    unbind [S fact]
    pew "(define (fact n) (if (<= n 1) 1 (* n (fact (- n 1)))))"
    pew "(fact 10)"
} -output 3628800\n

test cons-2.1 {calculate factorial 100} -body {
  # the bug is that it's too long and eats up the limit stack when there's a
  # problem
    pew "(fact 100)"
} -output 93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000\n

test cons-2.2 {calculate circle-area factorial 10} -body {
    pew "(circle-area (fact 10))"
} -output 41369087205782.695\n

cleanupTests
return
